name: build
on: 
    push:
        branches: [ master ]
    repository_dispatch:
        types: [ build ]

jobs: 
    build:
        runs-on: ubuntu-latest
        steps:
        - uses: actions/checkout@v2
        - uses: actions/setup-node@v1
          with: 
            node-version: '12'
        - name: install npm packages
          run: yarn install --only production
        - name: build & deploy
          run: yarn deploy
          env: 
            sanityToken: ${{ secrets.sanityToken }}
